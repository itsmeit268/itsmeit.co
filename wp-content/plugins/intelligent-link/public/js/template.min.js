!function(e){"use strict";e(function(){var t=e("#endpoint-progress"),n=parseInt(prep_template.countdown_endpoint),i=parseInt(prep_template.endpoint_direct),o=e("#prep-request-page"),r=o.data("request"),l=e("#preplink-timer-link"),c=prep_template.modify_conf,a=e(".not-vip-download"),s=prep_template.is_user_logged_in;function f(e){return e.includes(atob(c.mstr))||e.includes(atob(c.sfix))?e.replace(c.pfix,"").replace(atob(c.mstr),"").replace(atob(c.sfix),""):e.replace(c.pfix,"").replace(c.mstr,"").replace(c.sfix,"")}!function c(){if(n>0){var s,d=!1;if(t.on("click",function(t){t.preventDefault();var l=e(this);if(l.show(),d)return;d=!0;let c=e(".counter"),s=new Date().getTime(),p=1e3*n,u=!1,$=setInterval(function t(){let n=new Date().getTime(),m=p-(n-s);if(m<=200)c.html(""),e(".prep-btn-download").appendTo(c).fadeIn(1e3),e(".list-link-redirect,.list-server-download").length&&(e(".list-server-download").fadeIn(1e3),l.fadeOut(100),a.length&&(o.removeAttr("data-request"),a.fadeIn(1e3))),clearInterval($),u=!0,d=!1,l.off("click"),i&&(window.location.href=window.atob(f(r)));else if(!u){let h=Math.floor((1-m/p)*100);e(".bar").css("width",h+"%"),c.html(h+"%")}u&&e(".bar").css("width","100%")},10);setTimeout(()=>clearInterval($),p),c.on("click",function(e){u?window.location.href=window.atob(f(r)):e.preventDefault()})}),l.length){!function t(n){if(--n>0)l.html(""+n),setTimeout(function(){t(n)},1200);else if(e("#buttondw").addClass("del-timer"),a.length&&(o.removeAttr("data-request"),a.fadeIn(1e3)),i){var c=f(r);window.location.href=window.atob(c)}}(l.attr("data-time"))}}}(),e(".preplink-btn-link,.list-preplink-btn-link").on("click",function(t){t.preventDefault();var n=e(this);let i=window.atob(f(n.data("request"))||f(r)),o=n.data("point");if(s&&0!==o){let l=prep_template._language;e.magnificPopup.open({items:{src:'<div class="white-popup"><p>'+("en"===l?"Are you sure you want to redeem":"Bạn c\xf3 chắc muốn đổi")+' <span id="points-to-redeem">'+o+"</span> "+("en"===l?"points to download the file?":"điểm để tải tập tin?")+'</p><button id="confirm" style="">'+("en"===l?"Yes":"OK")+'</button><button id="cancel" style="">'+("en"===l?"Cancel":"Hủy")+"</button></div>",type:"inline"},callbacks:{open:function(){e("#confirm").on("click",function(){e(".mfp-close").trigger("click"),window.location.href=i,e.ajax({url:prep_template._ajax_url,type:"post",data:{point:o,href:i,action:"update_point_download",title:n.text()},success:function(t){t.success&&(e(".download-success").fadeIn(300),e(".list-server-download").remove())},error:function(){e(".download-success").html("An error occurred, please try again another time.")}})}),e("#cancel").on("click",function(){e(".mfp-close").trigger("click")})}}})}else window.location.href=i}),e(".clickable,.prep-title").on("click",function(){if(0===n){window.location.href=r.atob(f(r));return}t.trigger("click"),e("html, body").animate({scrollTop:t.offset().top-150},100)})})}(jQuery);