!function(e){"use strict";e(function(){var t=e("#endpoint-progress"),n=parseInt(prep_template.countdown_endpoint),i=parseInt(prep_template.endpoint_direct),o=e("#prep-request-page"),l=o.data("request"),c=e("#preplink-timer-link"),a=prep_template.modify_conf,r=e(".not-vip-download"),s=prep_template.is_user_logged_in;function f(e){return e.includes(atob(a.mstr))||e.includes(atob(a.sfix))?e.replace(a.pfix,"").replace(atob(a.mstr),"").replace(atob(a.sfix),""):e.replace(a.pfix,"").replace(a.mstr,"").replace(a.sfix,"")}!function a(){if(n>0){var s,p=!1;if(t.on("click",function(t){t.preventDefault();var c=e(this);if(c.show(),p)return;p=!0;let a=e(".counter"),s=new Date().getTime(),d=1e3*n,u=!1,$=setInterval(function t(){let n=new Date().getTime(),m=d-(n-s);if(m<=200)a.html(""),e(".prep-btn-download").appendTo(a).fadeIn(1e3),e(".list-link-redirect,.list-server-download").length&&(e(".list-server-download").fadeIn(1e3),c.fadeOut(100),r.length&&(o.removeAttr("data-request"),r.fadeIn(1e3))),clearInterval($),u=!0,p=!1,c.off("click"),i&&(window.location.href=window.atob(f(l)));else if(!u){let h=Math.floor((1-m/d)*100);e(".bar").css("width",h+"%"),a.html(h+"%")}u&&e(".bar").css("width","100%")},10);setTimeout(()=>clearInterval($),d),a.on("click",function(e){u?window.location.href=window.atob(f(l)):e.preventDefault()})}),c.length){!function t(n){if(--n>0)c.html(""+n),setTimeout(function(){t(n)},1200);else if(e("#buttondw").addClass("del-timer"),r.length&&(o.removeAttr("data-request"),r.fadeIn(1e3)),i){var a=f(l);window.location.href=window.atob(a)}}(c.attr("data-time"))}}}(),e(".preplink-btn-link,.list-preplink-btn-link").on("click",function(t){t.preventDefault();var n=e(this);let i=window.atob(f(n.data("request"))||f(l)),o=n.data("point");if(s&&0!==o){let c=prep_template._language;e.magnificPopup.open({items:{src:'<div class="white-popup"><p>'+("en"===c?"Are you sure you want to redeem":"Bạn c\xf3 chắc muốn đổi")+' <span id="points-to-redeem">'+o+"</span> "+("en"===c?"points to download the file?":"điểm để tải tập tin?")+'</p><button id="confirm" style="">'+("en"===c?"Yes":"OK")+'</button><button id="cancel" style="">'+("en"===c?"Cancel":"Hủy")+"</button></div>",type:"inline"},callbacks:{open:function(){e("#confirm").on("click",function(){e.ajax({url:prep_template._ajax_url,type:"post",data:{point:o,href:i,action:"update_point_download",title:n.text()},success:function(e){e.success&&(window.location.href=i)}})}),e("#cancel").on("click",function(){e(".mfp-close").trigger("click")})}}})}else window.location.href=i}),e(".clickable,.prep-title").on("click",function(){if(0===n){window.location.href=l.atob(f(l));return}t.trigger("click"),e("html, body").animate({scrollTop:t.offset().top-150},100)})})}(jQuery);